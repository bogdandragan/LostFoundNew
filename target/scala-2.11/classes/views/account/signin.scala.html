
@main("Вход") {

    <div class="container" style="margin-top: 70px;">
        <div class="well col-md-4" style="margin: 0 auto; float: none;">
            <form id="login">
                <fieldset>
                    <legend>Войти</legend>
                    <div class="form-group">
                        <input type="email" class="form-control" id="email" placeholder="Email-адрес" required>
                    </div>
                    <div class="form-group">
                        <input type="password" class="form-control" id="password" placeholder="Пароль" required>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary" style="width: 100%">Войти</button>
                    </div>
                    <div style="float: left;">
                        <a href="/account/signin/forgot">Забыли пароль?</a>
                    </div>
                    <div style="float : right;">
                        <a href="/account/register">Регистрация</a>
                    </div>
                </fieldset>
            </form>
            <div class="alert alert-danger" id="error" style="display: none;">

            </div>
        </div>
    </div>

    <script>
        $( "#login" ).submit(function(event) {
    		event.preventDefault();
    		var request = {"action":"login", "params":{"email":$("#email").val(), "password":$("#password").val()}};

    		$.ajax({
    			type: "POST",
    			url: "@routes.Account.doSignin()",
    			data: JSON.stringify(request),
    			contentType: "application/json; charset=utf-8",
    			success: function(data){
    			    if(data.error == ""){
    			        window.location.replace("/account");
    			    }
    			    else{
    			       $("#error").text("Пользователь не найден");
                       $("#error").addClass('alert-danger').delay(3000).fadeOut("slow");
                       $("#error").css({"display": "block", "text-align": "center" });
    			    }
    				console.log(data);
    			}
			});
		});

          angular.module('lostfoundApp', ['ui.bootstrap'])
    </script>

}